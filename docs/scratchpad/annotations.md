# Short-Lived Certificate Annotations in OpenPGP

In OpenPGP it is customary to make third-party certification signatures over User IDs to indicate the third-party keyholder's opinion about the UserID.
These third-party certifications are long-lived statements that form the basis of the Web of Trust.
It is often desirable to make short-lived statements independently of the WoT, and it would be convenient to attach these to a certificate using a transport- and implementation-neutral format.

## Issues with third-party certifications as short-lived annotations

Third-party certification signatures tend to cumulate when certificates are refreshed.
To prevent signature spam, it is increasingly common for implementations to limit the distribution of third-party signatures, through mechanisms such as 1pa3pc.
This would not always be a reasonable requirement for the distribution of short-lived annotations, particularly ones generated by automated processes such as freshness testing.

In addition, the creator of the annotation would be required to manage long-lived secret key material required to make the signatures.
This may be onerous if the annotation is generated by an automated process, and overkill if the annotations are short-lived.

## Issues with unhashed subpackets as short-lived annotations

Unhashed subpackets on existing signatures have been suggested as a vector for annotations, however these have their own issues.

Firstly, it is not always obvious which signature should have the annotations appended, or which signature(s) to examine to find annotations.
If the annotations do not pertain directly to a particular signature packet, but instead to its subject, new overriding signatures may be added at any time.
Implementations must then decide what to do with the annotations on older signatures:

* Does the lack of an annotation on a newer signature negate the presence of that annotation on an older signature?
* Should annotations be moved or copied onto the most recent signature?
* What should happen when older signatures are cleaned or minimised?

In addition, there are no standard methods for resolving conflicts between two signatures that are identical apart from the contents of their unhashed areas.
It is therefore difficult to predict how the time evolution of unhashed subpacket areas will be interpreted by the receiving implementation.

## Data we might wish to annotate:

* Foreign proofs, e.g. DKIM signatures
* Authentication signatures (submission only)
* Provenance logs
* Freshness tests
* Non-certificate user preferences (e.g. expect-signed)

## Other prior art

* vCards
* Email and HTTP headers
    * Transport-specific, but could be defined compatibly
* Form data fields
    * Submission only

## Ideas

* Novel non-critical packet to contain annotations.
* Human-readable annotations could be formatted as email or HTTP headers, for compatibility.
* Binary annotations could be stored in raw format to save base64 encoding costs.
* Could instead be implemented as unhashed notation subpackets, which support both human readable and binary formats.
